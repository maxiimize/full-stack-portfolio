<!-- Hero Section -->
<section class="hero">
  <div class="hero-bg" aria-hidden="true">
    <div class="hero-orb hero-orb--1"></div>
    <div class="hero-orb hero-orb--2"></div>
    <div class="hero-grid"></div>
  </div>

  <div class="hero-content container">
    <div class="hero-layout">
      <!-- Left: Avatar with ring + status -->
      <div class="hero-visual">
        <div class="hero-avatar-ring">
          <div class="hero-avatar">
            <img src="profile.jpg" alt="Max Berridge" width="180" height="180" />
          </div>
          <!-- Animated ring -->
          <svg class="avatar-ring-svg" viewBox="0 0 200 200" aria-hidden="true">
            <circle class="ring-track" cx="100" cy="100" r="96" fill="none" stroke-width="1" />
            <circle class="ring-accent" cx="100" cy="100" r="96" fill="none" stroke-width="1.5" />
          </svg>
        </div>
        <div class="hero-status">
          <span class="status-dot" aria-hidden="true"></span>
          Available for work
        </div>
      </div>

      <!-- Right: Text content -->
      <div class="hero-text">
        <p class="hero-eyebrow">Backend-Focused Full-Stack Developer</p>
        <h1 class="hero-name">Max<br />Berridge</h1>
        <p class="hero-lead">
          I build robust, scalable backends and polished full-stack applications.
          Shipping production SaaS with <strong>.NET</strong>, <strong>FastAPI</strong>,
          <strong>React</strong> &amp; <strong>Angular</strong> &mdash; strong in APIs,
          databases, and complex business logic.
        </p>

        <ul class="hero-chips" aria-label="Tech stack">
          <li>.NET / C#</li>
          <li>FastAPI</li>
          <li>Angular</li>
          <li>React</li>
          <li>REST APIs</li>
          <li>Azure</li>
          <li>MongoDB</li>
          <li>AI / LLMs</li>
        </ul>

        <div class="hero-actions">
          <a href="mailto:max&#64;berridge.dev" class="hero-btn hero-btn--ghost">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/>
            </svg>
            Get in Touch
          </a>
        </div>

        <p class="hero-location">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/>
          </svg>
          Relocating to Riga &mdash; open to full-time roles
        </p>
      </div>
    </div>
  </div>

  <!-- Scroll indicator -->
  <div class="hero-scroll" aria-hidden="true">
    <span class="hero-scroll-label">Scroll to explore</span>
    <svg class="hero-scroll-chevron" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <polyline points="6 9 12 15 18 9"/>
    </svg>
  </div>

  <!-- Bottom glow separator -->
  <div class="hero-divider" aria-hidden="true"></div>
</section>

<!-- Projects Grid -->
<section id="projects" class="projects-section container" appScrollFade>
  <div class="section-header">
    <h2 class="section-title">Featured Projects</h2>
    <div class="section-line" aria-hidden="true"></div>
  </div>

  @if (loading()) {
    <div class="card-grid stagger-children">
      <app-skeleton-card [count]="6" />
    </div>
  }

  @if (error(); as err) {
    <div class="error-state" @fadeSlide>
      <div class="error-icon" aria-hidden="true">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" width="48" height="48">
          <circle cx="12" cy="12" r="10"/>
          <line x1="12" y1="8" x2="12" y2="12"/>
          <line x1="12" y1="16" x2="12.01" y2="16"/>
        </svg>
      </div>
      <p class="error-text">{{ err }}</p>
      <button class="btn btn-outline" (click)="loadProjects()">Try Again</button>
    </div>
  }

  @if (!loading() && !error() && projects().length === 0) {
    <div class="empty-state" @fadeSlide>
      <div class="empty-icon" aria-hidden="true">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" width="48" height="48">
          <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"/>
          <polyline points="13 2 13 9 20 9"/>
        </svg>
      </div>
      <p class="empty-text">No projects yet</p>
      <p class="empty-subtext">Check back soon for new work.</p>
    </div>
  }

  <div class="card-grid" @staggerList>
    @for (project of projects(); track project.id) {
      <article class="card">
        @if (project.screenshots.length > 0) {
          <div class="card-image-wrap">
            <img
              [src]="resolveUrl(project.screenshots[getActiveIndex(project.id)].url)"
              [alt]="project.screenshots[getActiveIndex(project.id)].altText ?? project.title"
              loading="lazy"
            />
            @if (project.screenshots.length > 1) {
              <button type="button" class="carousel-btn carousel-btn--prev" (click)="prevScreenshot(project.id, project.screenshots.length, $event)" aria-label="Previous screenshot">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" width="18" height="18">
                  <polyline points="15 18 9 12 15 6"/>
                </svg>
              </button>
              <button type="button" class="carousel-btn carousel-btn--next" (click)="nextScreenshot(project.id, project.screenshots.length, $event)" aria-label="Next screenshot">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" width="18" height="18">
                  <polyline points="9 18 15 12 9 6"/>
                </svg>
              </button>
              <div class="carousel-dots">
                @for (s of project.screenshots; track s.url; let i = $index) {
                  <span class="carousel-dot" [class.carousel-dot--active]="i === getActiveIndex(project.id)"></span>
                }
              </div>
            }
          </div>
        } @else {
          <div class="card-placeholder">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" width="40" height="40">
              <rect x="2" y="3" width="20" height="14" rx="2" ry="2"/>
              <line x1="8" y1="21" x2="16" y2="21"/>
              <line x1="12" y1="17" x2="12" y2="21"/>
            </svg>
          </div>
        }

        <div class="card-body">
          <h3 class="card-title">{{ project.title }}</h3>
          <p class="card-description">{{ project.description }}</p>

          @if (project.tags.length > 0) {
            <div class="tag-group card-tags">
              @for (tag of project.tags; track tag) {
                <span class="tag">{{ tag }}</span>
              }
            </div>
          }

          <div class="card-links">
            @if (project.liveUrl) {
              <a [href]="project.liveUrl" target="_blank" rel="noopener noreferrer" class="btn btn-primary btn-sm">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="14" height="14">
                  <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
                  <polyline points="15 3 21 3 21 9"/>
                  <line x1="10" y1="14" x2="21" y2="3"/>
                </svg>
                Live Demo
              </a>
            }
            @if (project.sourceUrl) {
              <a [href]="project.sourceUrl" target="_blank" rel="noopener noreferrer" class="btn btn-outline btn-sm">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="14" height="14">
                  <polyline points="16 18 22 12 16 6"/>
                  <polyline points="8 6 2 12 8 18"/>
                </svg>
                Source
              </a>
            }
          </div>
        </div>
      </article>
    }
  </div>
</section>
